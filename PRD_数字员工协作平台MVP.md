# Heliki OS 数字员工协作平台 MVP 产品需求文档

## 产品概述

### 产品定位
将Heliki OS从简单的Claude Code UI工具演进为数字员工协作平台，让小企业主能够"雇佣"和"管理"具备自主学习能力的数字员工团队。

### 核心价值主张
"让小企业主能够以极低成本雇佣一支具备无限学习能力的数字员工团队，实现7×24小时的智能化业务处理，并能根据业务需求自主获取新技能"

### MVP成功标准
- 用户开始用"我的xx员工"来称呼AI功能
- 用户能说出每个员工这周做了多少工作  
- 至少有一次AI主动完成了用户没有直接要求的任务

## 默认数字员工配置

### 1. 文档管理员
- **角色定义：** 专业的文件整理和管理专家
- **核心职责：** 自动整理/分类/重命名项目文件，清理AI产生的重复和临时文件，智能归档和版本管理，重要文档提醒和备份
- **工作价值：** "让文件井井有条，AI产生的冗余文件不再困扰"

### 2. 工作助理  
- **角色定义：** 贴身工作秘书和事务协调员
- **核心职责：** 制定每日/每周工作计划，协调任务分配，处理来访咨询和初级客户服务，提醒重要事项和截止日期
- **工作价值：** "像贴身秘书一样安排工作，协调团队"

### 3. 财务助理
- **角色定义：** 财务记录和风险分析专家
- **核心职责：** 拍照识别发票/收据并自动录入，生成财务报表和成本分析，识别财务风险和异常支出，税务提醒和合规检查
- **工作价值：** "多模态识别+风险预警，让财务透明可控"

### 4. 信息收集员
- **角色定义：** 信息获取和分析专家  
- **核心职责：** 根据用户设定目标收集相关信息，监控行业动态和竞品信息，关联公众号、网站进行定向推送，信息价值评估和重要性排序
- **工作价值：** "主动筛选有价值信息，关联推送"

### 5. 全栈工程师
- **角色定义：** 技术问题解决和应用开发专家
- **核心职责：** 根据业务需求开发小工具和应用，解决其他智能体遇到的技术问题，系统集成和API开发，自动化脚本编写
- **工作价值：** "按需开发应用，解决技术问题"

## MVP功能实现路线图

### 第一阶段：基础员工系统 (2-3周)

#### 1.1 默认智能体自动部署 ⭐⭐⭐⭐⭐
**功能描述：** 系统启动时自动创建5个默认agent的markdown配置文件

**技术实现：**
- 扩展 `projects_manager.py` 添加agents管理功能
- 在应用启动时检查 `~/.claude/agents/` 目录
- 如果目录为空，自动创建5个默认agent的markdown文件
- 集成到现有的环境检测机制中

**验收标准：**
- 首次启动系统时，`~/.claude/agents/` 目录自动创建5个agent文件
- 每个agent文件包含正确的YAML前置内容和角色描述
- 环境检测页面显示"数字员工团队已就绪"

**技术风险：** 低
**用户价值：** 高 - 开箱即用，立即拥有专业团队

#### 1.2 员工身份可视化 ⭐⭐⭐⭐⭐
**功能描述：** 在侧边栏显示数字员工团队，让用户看到"雇佣了5个员工"

**技术实现：**
- 扩展侧边栏组件 `sidebar.js` 
- 读取agents目录，解析markdown文件的YAML前置内容
- 在侧边栏添加"员工团队"区域
- 显示每个员工的名称、角色、状态、专业技能

**验收标准：**
- 侧边栏显示"我的数字员工"区域
- 列出5个员工，每个显示：名称、角色、在线状态、专业技能标签
- 点击员工可查看详细信息（职责描述、工作历史）
- 支持员工状态实时更新

**技术风险：** 低
**用户价值：** 高 - 心理模式从"工具使用者"转为"团队管理者"

**依赖：** 1.1 默认智能体自动部署

### 第二阶段：主动工作能力 (3-4周) 🔥
**阶段目标：** 让用户体验到"员工主动干活"的核心价值

#### 2.1 定时任务框架 ⭐⭐⭐⭐⭐
**功能描述：** 支持数字员工按时间表主动执行任务

**技术实现：**
- 在 `app.py` 中添加后台任务调度系统
- 使用Python的APScheduler实现定时任务管理
- 创建任务队列，支持周期性任务（每日、每周）和延时任务
- 任务执行通过现有的Claude CLI集成，调用相应的agent
- 提供任务管理API：创建、暂停、删除、查询任务
- 任务执行结果通过WebSocket推送给前端

**最小可行实现策略：**
- 先实现1-2个简单的定时任务：每日文档整理、每周信息收集
- 用户能看到员工"按时上班"的效果
- 验证技术架构的稳定性后再扩展更多任务类型

**验收标准：**
- 支持创建定时任务：每日文档整理、每周信息收集、定时财务分析
- 任务能够按计划自动执行，无需用户干预
- 任务执行状态可追踪：等待中、执行中、已完成、失败
- 用户可以查看、暂停、恢复定时任务
- 任务执行结果实时推送到前端界面

**技术风险：** 高 - 新的架构组件，可能影响系统稳定性
**用户价值：** 极高 - 主动工作能力的核心实现，从"被动工具"到"主动员工"的关键转折点

**依赖：** 1.2 员工身份可视化

#### 2.2 文件监控系统 ⭐⭐⭐⭐☆
**功能描述：** 数字员工能感知文件变化并主动处理

**技术实现：**
- 使用Python watchdog库监控项目文件夹变化
- 文件变化事件触发相应agent处理（新文件→文档管理员处理）
- 支持配置监控规则：文件类型过滤、目录忽略、处理延迟
- 文件处理结果通过WebSocket推送到前端
- 提供文件操作历史记录

**聚焦核心场景策略：**
- 专注文档管理员的文件整理功能
- 新文件自动分类和重命名
- 让用户直观感受到"员工在主动干活"

**验收标准：**
- 新文件添加时，文档管理员自动进行分类和重命名
- 支持多种文件类型的智能处理：文档、图片、代码文件
- 用户可以配置监控规则和处理偏好
- 文件处理过程和结果实时显示在界面上
- 支持批量文件处理和撤销操作

**技术风险：** 中 - 文件系统监控的性能和稳定性
**用户价值：** 高 - 自动文档整理，让用户直观感受员工主动工作

**依赖：** 2.1 定时任务框架

#### 2.3 基础工作通知 ⭐⭐⭐⭐☆
**功能描述：** 员工完成工作后主动汇报，强化员工身份感知

**技术实现：**
- 任务完成后通过WebSocket推送通知到前端
- 简单的通知消息格式："您的xx员工刚刚完成了xx任务"
- 支持通知历史记录和查看
- 通知内容包含：员工名称、完成任务、处理时间

**简单有效策略：**
- "您的文档管理员刚刚整理了5个文件"
- "您的信息收集员完成了今日资讯收集"
- 强化员工身份感知，让用户感受到员工在主动工作

**验收标准：**
- 任务完成时立即推送通知到前端界面
- 通知内容清晰描述员工和完成的工作
- 支持通知历史查看和管理
- 用户可以配置通知频率和类型

**技术风险：** 低 - 基于现有WebSocket通信
**用户价值：** 高 - 强化员工身份认知，增强主动工作体验

**依赖：** 2.2 文件监控系统

### 第三阶段：工作成果跟踪 (2-3周) 📊
**阶段目标：** 让用户看到"员工的具体贡献"

#### 3.1 基础工作统计 ⭐⭐⭐⭐⭐
**功能描述：** 追踪和统计每个智能体完成的工作量

**技术实现：**
- 扩展 `claude_cli.py` 添加日志解析功能
- 解析Claude CLI的输出日志，识别完成的任务类型
- 按agent分类统计：文件操作数、代码生成行数、处理时长、token消耗
- 在内存中维护工作统计数据
- 提供统计数据的API接口

**验收标准：**
- 能够识别并统计各种工作类型：文件操作、代码生成、问题解答等
- 按agent分类记录工作量，包含时间戳
- 统计数据包含：今日任务数、本周任务数、累计token消耗
- 提供工作历史查询功能

**技术风险：** 中 - 日志解析的复杂度和准确性
**用户价值：** 高 - ROI可视化，工作成果量化

**依赖：** 2.3 基础工作通知

#### 3.2 工作仪表板 ⭐⭐⭐⭐☆
**功能描述：** 可视化显示数字员工团队的工作统计和成果

**技术实现：**
- 创建新的仪表板页面组件 `employee_dashboard.js`
- 显示团队总体工作统计：今日/本周工作量、token消耗、任务完成率
- 显示每个员工的工作详情：专业技能、完成任务、效率排名
- 通过WebSocket实时更新统计数据
- 支持时间范围筛选（今日/本周/本月）

**验收标准：**
- 仪表板显示团队工作概览：总任务数、总token消耗、活跃员工数
- 每个员工显示：头像、姓名、今日工作量、本周趋势、技能标签
- 支持实时数据刷新，工作完成时立即更新统计
- 提供简单的数据可视化（进度条、趋势图）

**技术风险：** 低
**用户价值：** 高 - 强化管理者体验，工作成果可视化

**依赖：** 3.1 基础工作统计

#### 3.3 工作报告生成 ⭐⭐⭐☆☆
**功能描述：** 数字员工定期汇报工作进展

**技术实现：**
- 基于定时任务和工作统计数据
- 定时汇总各员工的工作情况（每日/每周）
- 生成结构化的工作报告：完成任务、遇到问题、建议改进
- 通过WebSocket推送报告到前端，或保存为文档
- 支持报告模板自定义和导出功能

**验收标准：**
- 每日/每周自动生成团队工作报告
- 报告内容包含：各员工工作量、重要成果、异常情况
- 支持报告查看、下载和分享
- 用户可以设定报告频率和内容偏好

**技术风险：** 低
**用户价值：** 中 - 管理体验增强

**依赖：** 3.2 工作仪表板

### 第四阶段：技能扩展能力 (2-3周) 🔧
**阶段目标：** 让用户感受到"员工在学习新技能"

#### 4.1 MCP工具推荐 ⭐⭐⭐☆☆
**功能描述：** 智能体发现需要新工具时主动推荐

**技术实现：**
- 扩展Claude CLI集成，监控输出日志
- 识别工具不足的情况（如"需要访问数据库"、"需要发送邮件"）
- 建立MCP服务器推荐数据库，匹配需求和可用工具
- 在界面提示用户安装建议的工具
- 记录工具推荐历史和用户反馈

**验收标准：**
- 自动识别智能体的工具需求
- 推荐相关的MCP服务器，包含功能描述和安装说明
- 用户可以查看推荐历史和安装状态
- 支持工具推荐的用户反馈和评分

**技术风险：** 中 - 智能推荐算法的准确性
**用户价值：** 中 - 员工技能扩展

**依赖：** 3.3 工作报告生成

#### 4.2 一键工具安装 ⭐⭐☆☆☆
**功能描述：** 用户确认后自动安装推荐的MCP服务器

**技术实现：**
- 用户确认后执行 `claude mcp add` 命令
- 监控安装进度和结果
- 安装成功后更新相关agents配置，包含新工具
- 通知相关员工已获得新技能
- 提供工具管理界面：查看、启用、禁用已安装工具

**验收标准：**
- 一键安装推荐的MCP服务器
- 安装过程可视化，显示进度和状态
- 安装完成后相关员工自动获得新技能
- 支持工具的启用/禁用管理

**技术风险：** 低
**用户价值：** 中 - 用户体验优化

**依赖：** 4.1 MCP工具推荐

## 调整后的开发路径说明

### **路径调整理由**

**为什么定时任务应该是第二阶段？**
1. **用户价值最直观：** 员工主动工作比工作统计更能体现"雇佣员工"的价值
2. **体验差异最明显：** 从"被动工具"到"主动员工"的关键转折点  
3. **验证核心假设：** 验证用户是否真的需要"主动工作"的AI
4. **技术风险可控：** 虽然是高风险功能，但放在第二阶段有足够时间验证

**为什么工作统计推到第三阶段？**
1. **需要有工作内容才能统计：** 定时任务和文件监控产生的工作记录才有统计价值
2. **锦上添花的功能：** 有了主动工作能力，统计只是让体验更完整
3. **开发依赖关系：** 统计功能需要基于实际的工作日志数据

### **各阶段核心目标**
- **第一阶段：** 让用户看到"雇佣了数字员工团队" 
- **第二阶段：** 让用户体验到"员工主动干活"的核心价值 🔥
- **第三阶段：** 让用户看到"员工的具体贡献" 📊
- **第四阶段：** 让用户感受到"员工在学习新技能" 🔧

## 技术架构说明

### 现有架构基础
- ✅ Claude CLI集成和WebSocket通信 (`claude_cli.py`, `websocket.js`)
- ✅ 项目管理和文件树浏览 (`projects_manager.py`, `file_tree.js`)
- ✅ 基础Web界面框架 (`app.py`, `sidebar.js`)
- ✅ 环境检测和错误处理 (`EnvironmentChecker`)

### 新增核心模块
- **Agent管理器：** 管理默认智能体的创建、配置和状态
- **工作统计器：** 解析日志，统计各员工工作量
- **任务调度器：** 支持定时任务和文件监控触发
- **工具管理器：** MCP服务器推荐和安装管理

### 用户界面调整
- **重点维护终端形态：** 专注于shell交互，暂停chat.js维护
- **侧边栏扩展：** 添加员工团队展示区域
- **新增仪表板：** 工作统计和成果可视化
- **任务管理界面：** 定时任务配置和监控

## 风险评估

### 高风险项目
- **定时任务框架：** 可能影响现有架构稳定性，需要充分测试

### 中风险项目  
- **文件监控系统：** 性能和稳定性需要验证
- **日志解析统计：** 准确性和复杂度需要控制
- **MCP工具检测：** 推荐算法的准确性

### 低风险项目
- **文件操作类功能：** 基于现有能力扩展
- **前端界面扩展：** 基于现有组件开发

## 开发优先级说明

**必做功能 (⭐⭐⭐⭐⭐)：**
- 默认智能体部署和身份可视化
- 工作成果统计和追踪
- 定时任务框架

**重要功能 (⭐⭐⭐⭐☆)：**
- 工作仪表板
- 文件监控系统

**可选功能 (⭐⭐⭐☆☆及以下)：**
- 工作报告生成
- MCP工具推荐和安装

## 验收和测试

### 功能测试
- 每个功能模块独立测试通过
- 模块间集成测试验证
- 用户场景端到端测试

### 用户体验测试
- 5名小企业主进行产品试用
- 收集"员工感知"和"管理体验"反馈
- 验证MVP成功标准达成情况

### 性能测试
- 定时任务系统稳定性测试
- 文件监控系统性能测试
- WebSocket并发连接测试

## 开发路径：
  - 第一阶段 (2-3周): 智能体部署 + 身份可视化
  - 第二阶段 (2-3周): 工作统计 + 仪表板
  - 第三阶段 (3-4周): 定时任务 + 文件监控 + 工作报告
  - 第四阶段 (2-3周): MCP工具推荐 + 一键安装
---

**文档版本：** V1.0  
**创建时间：** 2025-01-08  
**更新时间：** 2025-01-08  
**责任人：** Heliki OS 开发团队